self.csv_parse_sync=function(t){"use strict";var e=self,f=[],l=[],L="undefined"!=typeof Uint8Array?Uint8Array:Array,u=!1;function h(){u=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)f[e]=t[e],l[t.charCodeAt(e)]=e;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63}function P(t,e,i){for(var r,n=[],o=e;o<i;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],n.push(f[r>>18&63]+f[r>>12&63]+f[r>>6&63]+f[63&r]);return n.join("")}function O(t){u||h();for(var e,i=t.length,r=i%3,n="",o=[],s=0,a=i-r;s<a;s+=16383)o.push(P(t,s,a<s+16383?a:s+16383));return 1==r?(e=t[i-1],n=(n+=f[e>>2])+f[e<<4&63]+"=="):2==r&&(e=(t[i-2]<<8)+t[i-1],n=(n=(n+=f[e>>10])+f[e>>4&63])+f[e<<2&63]+"="),o.push(n),o.join("")}function i(t,e,i,r,n){var o,s,a=8*n-r-1,f=(1<<a)-1,l=f>>1,u=-7,h=i?n-1:0,c=i?-1:1,n=t[e+h];for(h+=c,o=n&(1<<-u)-1,n>>=-u,u+=a;0<u;o=256*o+t[e+h],h+=c,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;0<u;s=256*s+t[e+h],h+=c,u-=8);if(0===o)o=1-l;else{if(o===f)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=l}return(n?-1:1)*s*Math.pow(2,o-r)}function o(t,e,i,r,n,o){var s,a,f=8*o-n-1,l=(1<<f)-1,u=l>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,c=r?0:o-1,_=r?1:-1,o=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(e+=1<=s+u?h/r:h*Math.pow(2,1-u))*r&&(s++,r/=2),l<=s+u?(a=0,s=l):1<=s+u?(a=(e*r-1)*Math.pow(2,n),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),s=0));8<=n;t[i+c]=255&a,c+=_,a/=256,n-=8);for(s=s<<n|a,f+=n;0<f;t[i+c]=255&s,c+=_,s/=256,f-=8);t[i+c-_]|=128*o}var B={}.toString,a=Array.isArray||function(t){return"[object Array]"==B.call(t)};function r(){return Z.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return Z.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Z.prototype:(t=null===t?new Z(e):t).length=e,t}function Z(t,e,i){if(!(Z.TYPED_ARRAY_SUPPORT||this instanceof Z))return new Z(t,e,i);if("number"!=typeof t)return n(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _(this,t)}function n(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var n=t,o=e,s=i;if(o.byteLength,s<0||o.byteLength<s)throw new RangeError("'offset' is out of bounds");if(o.byteLength<s+(r||0))throw new RangeError("'length' is out of bounds");return o=void 0===s&&void 0===r?new Uint8Array(o):void 0===r?new Uint8Array(o,s):new Uint8Array(o,s,r),Z.TYPED_ARRAY_SUPPORT?(n=o).__proto__=Z.prototype:n=g(n,o),n}if("string"!=typeof e){s=t,r=e;if(m(r))return o=0|d(r.length),0!==(s=c(s,o)).length&&r.copy(s,0,0,o),s;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||function(t){return t!=t}(r.length)?c(s,0):g(s,r);if("Buffer"===r.type&&a(r.data))return g(s,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}n=t,r=e,t=i;if(Z.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return e=0|p(r,t),n=(r=(n=c(n,e)).write(r,t))!==e?n.slice(0,r):n;throw new TypeError('"encoding" must be a valid string encoding')}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _(t,e){if(s(e),t=c(t,e<0?0:0|d(e)),!Z.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function g(t,e){var i=e.length<0?0:0|d(e.length);t=c(t,i);for(var r=0;r<i;r+=1)t[r]=255&e[r];return t}function d(t){if(r()<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t){return null!=t&&t._isBuffer}function p(t,e){if(m(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var i=(t="string"!=typeof t?""+t:t).length;if(0===i)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return C(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(r)return C(t).length;e=(""+e).toLowerCase(),r=!0}}function U(t,e,i){var r,n=!1;if((e=void 0===e||e<0?0:e)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=this,s=e,a=i,f=o.length;(!a||a<0||f<a)&&(a=f);for(var l="",u=s=!s||s<0?0:s;u<a;++u)l+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(o[u]);return l;case"utf8":case"utf-8":return S(this,e,i);case"ascii":var h=this,f=e,c=i,_="";c=Math.min(h.length,c);for(var g=f;g<c;++g)_+=String.fromCharCode(127&h[g]);return _;case"latin1":case"binary":var d=this,s=e,m=i,p="";m=Math.min(d.length,m);for(var y=s;y<m;++y)p+=String.fromCharCode(d[y]);return p;case"base64":return w=this,r=i,0===(b=e)&&r===w.length?O(w):O(w.slice(b,r));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var w=e,b=i,v=this.slice(w,b),I="",E=0;E<v.length;E+=2)I+=String.fromCharCode(v[E]+256*v[E+1]);return I;default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function w(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?n?0:t.length-1:i)<0?t.length+i:i)>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if(m(e="string"==typeof e?Z.from(e,r):e))return 0===e.length?-1:b(t,e,i,r,n);if("number"==typeof e)return e&=255,Z.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,e,i):b(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function b(t,e,i,r,n){var o=1,s=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s/=o=2,a/=2,i/=2}function f(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n)for(var l=-1,u=i;u<s;u++)if(f(t,u)===f(e,-1===l?0:u-l)){if(u-(l=-1===l?u:l)+1===a)return l*o}else-1!==l&&(u-=u-l),l=-1;else for(u=i=s<i+a?s-a:i;0<=u;u--){for(var h=!0,c=0;c<a;c++)if(f(t,u+c)!==f(e,c)){h=!1;break}if(h)return u}return-1}function v(t,e,i,r){return D(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function M(t,e,i,r){return D(function(t,e){for(var i,r,n=[],o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n.push(i%256),n.push(r);return n}(e,t.length-i),t,i,r)}function S(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var o,s,a,f,l=t[n],u=null,h=239<l?4:223<l?3:191<l?2:1;if(n+h<=i)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[n+1]))&&127<(f=(31&l)<<6|63&o)&&(u=f);break;case 3:o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&2047<(f=(15&l)<<12|(63&o)<<6|63&s)&&(f<55296||57343<f)&&(u=f);break;case 4:o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(f=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)&&f<1114112&&(u=f)}null===u?(u=65533,h=1):65535<u&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=h}var c=r,_=c.length;if(_<=I)return String.fromCharCode.apply(String,c);for(var g="",d=0;d<_;)g+=String.fromCharCode.apply(String,c.slice(d,d+=I));return g}Z.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,Z.poolSize=8192,Z._augment=function(t){return t.__proto__=Z.prototype,t},Z.from=function(t,e,i){return n(null,t,e,i)},Z.TYPED_ARRAY_SUPPORT&&(Z.prototype.__proto__=Uint8Array.prototype,Z.__proto__=Uint8Array),Z.alloc=function(t,e,i){return r=null,e=e,i=i,s(t=t),!(t<=0)&&void 0!==e?"string"==typeof i?c(r,t).fill(e,i):c(r,t).fill(e):c(r,t);var r},Z.allocUnsafe=function(t){return _(null,t)},Z.allocUnsafeSlow=function(t){return _(null,t)},Z.isBuffer=x,Z.compare=function(t,e){if(!m(t)||!m(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,r=e.length,n=0,o=Math.min(i,r);n<o;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},Z.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Z.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Z.alloc(0);if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;for(var i=Z.allocUnsafe(e),r=0,n=0;n<t.length;++n){var o=t[n];if(!m(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},Z.byteLength=p,Z.prototype._isBuffer=!0,Z.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},Z.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},Z.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},Z.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?S(this,0,t):U.apply(this,arguments)},Z.prototype.equals=function(t){if(m(t))return this===t||0===Z.compare(this,t);throw new TypeError("Argument must be a Buffer")},Z.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length)&&(t+=" ... "),"<Buffer "+t+">"},Z.prototype.compare=function(t,e,i,r,n){if(!m(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),(e=void 0===e?0:e)<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(n<=r&&i<=e)return 0;if(n<=r)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(n>>>=0)-(r>>>=0),s=(i>>>=0)-(e>>>=0),a=Math.min(o,s),f=this.slice(r,n),l=t.slice(e,i),u=0;u<a;++u)if(f[u]!==l[u]){o=f[u],s=l[u];break}return o<s?-1:s<o?1:0},Z.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},Z.prototype.indexOf=function(t,e,i){return w(this,t,e,i,!0)},Z.prototype.lastIndexOf=function(t,e,i){return w(this,t,e,i,!1)},Z.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||n<i)&&(i=n),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,f=!1;;)switch(r){case"hex":var l=this,u=t,h=e,c=i,_=(h=Number(h)||0,l.length-h);if((!c||_<(c=Number(c)))&&(c=_),(_=u.length)%2!=0)throw new TypeError("Invalid hex string");_/2<c&&(c=_/2);for(var g=0;g<c;++g){var d=parseInt(u.substr(2*g,2),16);if(isNaN(d))return g;l[h+g]=d}return g;case"utf8":case"utf-8":return _=e,a=i,D(C(t,(s=this).length-_),s,_,a);case"ascii":return v(this,t,e,i);case"latin1":case"binary":return v(this,t,e,i);case"base64":return s=this,a=e,o=i,D(Y(t),s,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,i);default:if(f)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function E(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,i,r,n,o){if(!m(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function A(t,e,i,r){e<0&&(e=65535+e+1);for(var n=0,o=Math.min(t.length-i,2);n<o;++n)t[i+n]=(e&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function N(t,e,i,r){e<0&&(e=4294967295+e+1);for(var n=0,o=Math.min(t.length-i,4);n<o;++n)t[i+n]=e>>>8*(r?n:3-n)&255}function T(t,e,i,r){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function V(t,e,i,r,n){return n||T(t,0,i,4),o(t,e,i,r,23,4),i+4}function q(t,e,i,r,n){return n||T(t,0,i,8),o(t,e,i,r,52,8),i+8}Z.prototype.slice=function(t,e){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),Z.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=Z.prototype;else for(var r=e-t,n=new Z(r,void 0),o=0;o<r;++o)n[o]=this[o+t];return n},Z.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return r},Z.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var r=this[t+--e],n=1;0<e&&(n*=256);)r+=this[t+--e]*n;return r},Z.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},Z.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},Z.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},Z.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Z.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Z.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var r=this[t],n=1,o=0;++o<e&&(n*=256);)r+=this[t+o]*n;return(n*=128)<=r&&(r-=Math.pow(2,8*e)),r},Z.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var r=e,n=1,o=this[t+--r];0<r&&(n*=256);)o+=this[t+--r]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*e)),o},Z.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Z.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},Z.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},Z.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Z.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Z.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),i(this,t,!0,23,4)},Z.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),i(this,t,!1,23,4)},Z.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),i(this,t,!0,52,8)},Z.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),i(this,t,!1,52,8)},Z.prototype.writeUIntLE=function(t,e,i,r){t=+t,e|=0,i|=0,r||R(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,o=0;for(this[e]=255&t;++o<i&&(n*=256);)this[e+o]=t/n&255;return e+i},Z.prototype.writeUIntBE=function(t,e,i,r){t=+t,e|=0,i|=0,r||R(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,o=1;for(this[e+n]=255&t;0<=--n&&(o*=256);)this[e+n]=t/o&255;return e+i},Z.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,1,255,0),Z.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Z.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},Z.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,65535,0),Z.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},Z.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},Z.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,4294967295,0),Z.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},Z.prototype.writeIntLE=function(t,e,i,r){t=+t,e|=0,r||R(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var n=0,o=1,s=0;for(this[e]=255&t;++n<i&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},Z.prototype.writeIntBE=function(t,e,i,r){t=+t,e|=0,r||R(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var n=i-1,o=1,s=0;for(this[e+n]=255&t;0<=--n&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+i},Z.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,1,127,-128),Z.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&(t=t<0?255+t+1:t),e+1},Z.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},Z.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,2,32767,-32768),Z.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},Z.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,2147483647,-2147483648),Z.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},Z.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Z.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},Z.prototype.writeFloatLE=function(t,e,i){return V(this,t,e,!0,i)},Z.prototype.writeFloatBE=function(t,e,i){return V(this,t,e,!1,i)},Z.prototype.writeDoubleLE=function(t,e,i){return q(this,t,e,!0,i)},Z.prototype.writeDoubleBE=function(t,e,i){return q(this,t,e,!1,i)},Z.prototype.copy=function(t,e,i,r){if(i=i||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),(r=0<r&&r<i?i:r)===i)return 0;if(0===t.length||0===this.length)return 0;if((e=e||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var n,o=(r=t.length-e<r-i?t.length-e+i:r)-i;if(this===t&&i<e&&e<r)for(n=o-1;0<=n;--n)t[n+e]=this[n+i];else if(o<1e3||!Z.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},Z.prototype.fill=function(t,e,i,r){if("string"==typeof t){var n;if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===t.length&&(n=t.charCodeAt(0))<256&&(t=n),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Z.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(!(i<=e))if(e>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(a=e;a<i;++a)this[a]=t;else for(var o=m(t)?t:C(new Z(t,r).toString()),s=o.length,a=0;a<i-e;++a)this[a+e]=o[a%s];return this};var J=/[^+\/0-9A-Za-z-_]/g;function C(t,e){e=e||1/0;for(var i,r=t.length,n=null,o=[],s=0;s<r;++s){if(55295<(i=t.charCodeAt(s))&&i<57344){if(!n){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(e-=3)&&o.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(e-=3)&&o.push(239,191,189);if(n=null,i<128){if(--e<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Y(t){var e=function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(J,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t);u||h();var i,t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===e[t-2]?2:"="===e[t-1]?1:0,n=new L(3*t/4-r),o=0<r?t-4:t,s=0,a=0;a<o;a+=4)i=l[e.charCodeAt(a)]<<18|l[e.charCodeAt(a+1)]<<12|l[e.charCodeAt(a+2)]<<6|l[e.charCodeAt(a+3)],n[s++]=i>>16&255,n[s++]=i>>8&255,n[s++]=255&i;return 2==r?(i=l[e.charCodeAt(a)]<<2|l[e.charCodeAt(a+1)]>>4,n[s++]=255&i):1==r&&(i=l[e.charCodeAt(a)]<<10|l[e.charCodeAt(a+1)]<<4|l[e.charCodeAt(a+2)]>>2,n[s++]=i>>8&255,n[s++]=255&i),n}function D(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function x(t){return null!=t&&(!!t._isBuffer||k(t)||"function"==typeof(t=t).readFloatLE&&"function"==typeof t.slice&&k(t.slice(0,0)))}function k(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}class X extends Error{constructor(t,e,i,...r){super(e=Array.isArray(e)?e.join(" ").trim():e),void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,X),this.code=t;for(const n of r)for(const o in n){const s=n[o];this[o]=x(s)?s.toString(i.encoding):null==s?s:JSON.parse(JSON.stringify(s))}}}const F=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},z=function(i){const r=[];for(let t=0,e=i.length;t<e;t++){const n=i[t];if(null==n||!1===n)r[t]={disabled:!0};else if("string"==typeof n)r[t]={name:n};else{if(!F(n))throw new X("CSV_INVALID_COLUMN_DEFINITION",["Invalid column definition:","expect a string or a literal object,",`got ${JSON.stringify(n)} at position `+t]);if("string"!=typeof n.name)throw new X("CSV_OPTION_COLUMNS_MISSING_NAME",["Option columns missing name:",'property "name" is required at position '+t,"when column is an object literal"]);r[t]=n}}return r};class j{constructor(t=100){this.size=t,this.length=0,this.buf=Z.allocUnsafe(t)}prepend(t){if(x(t)){const e=this.length+t.length;if(e>=this.size&&(this.resize(),e>=this.size))throw Error("INVALID_BUFFER_STATE");const i=this.buf;this.buf=Z.allocUnsafe(this.size),t.copy(this.buf,0),i.copy(this.buf,t.length),this.length+=t.length}else{const r=this.length++,n=(r===this.size&&this.resize(),this.clone());this.buf[0]=t,n.copy(this.buf,1,0,r)}}append(t){const e=this.length++;e===this.size&&this.resize(),this.buf[e]=t}clone(){return Z.from(this.buf.slice(0,this.length))}resize(){const t=this.length,e=(this.size=2*this.size,Z.allocUnsafe(this.size));this.buf.copy(e,0,0,t),this.buf=e}toString(t){return t?this.buf.slice(0,this.length).toString(t):Uint8Array.prototype.slice.call(this.buf.slice(0,this.length))}toJSON(){return this.toString("utf8")}reset(){this.length=0}}function Q(t={}){const e=rt(t);return{info:{bytes:0,comment_lines:0,empty_lines:0,invalid_field_length:0,lines:1,records:0},original_options:t,options:e,state:et(e),__needMoreData:function(t,e,i){if(i)return!1;const{encoding:r,escape:n,quote:o}=this.options,{quoting:s,needMoreDataSize:a,recordDelimiterMaxLength:f}=this.state,l=e-t-1,u=Math.max(a,0===f?Z.from("\r\n",r).length:f,s?(null===n?0:n.length)+o.length:0,s?o.length+f:0);return l<u},parse:function(t,e,i,r){let{bom:n,comment_no_infix:U,encoding:o,from_line:M,ltrim:V,max_record_size:s,raw:q,relax_quotes:a,rtrim:f,skip_empty_lines:J,to:l,to_line:u}=this.options,{comment:h,escape:c,quote:_,record_delimiter:g}=this.options,{bomSkipped:Y,previousBuf:d,rawBuffer:k,escapeIsQuote:F}=this.state,m;if(void 0===d){if(void 0===t)return void r();m=t}else m=void 0!==d&&void 0===t?d:Z.concat([d,t]);if(!1===Y)if(!1===n)this.state.bomSkipped=!0;else if(m.length<3){if(!1===e)return void(this.state.previousBuf=m)}else{for(const o in K)if(0===K[o].compare(m,0,K[o].length)){const w=K[o].length;this.state.bufBytesStart+=w,m=m.slice(w),this.options=rt({...this.original_options,encoding:o}),{comment:h,escape:c,quote:_}=this.options;break}this.state.bomSkipped=!0}const p=m.length;let y;for(y=0;y<p&&!this.__needMoreData(y,p,e);y++){if(!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1),-1!==u&&this.info.lines>u)return this.state.stop=!0,void r();if(!1===this.state.quoting&&0===g.length){const E=this.__autoDiscoverRecordDelimiter(m,y);E&&(g=this.options.record_delimiter)}const b=m[y];if(!0===q&&k.append(b),b!==ot&&b!==st||!1!==this.state.wasRowDelimiter||(this.state.wasRowDelimiter=!0),!0===this.state.escaping)this.state.escaping=!1;else{if(null!==c&&!0===this.state.quoting&&this.__isEscape(m,y,b)&&y+c.length<p){if(!F){this.state.escaping=!0,y+=c.length-1;continue}if(this.__isQuote(m,y+c.length)){this.state.escaping=!0,y+=c.length-1;continue}}if(!1===this.state.commenting&&this.__isQuote(m,y))if(!0===this.state.quoting){const O=m[y+_.length],z=f&&this.__isCharTrimable(m,y+_.length),j=null!==h&&this.__compareBytes(h,m,y+_.length,O),Q=this.__isDelimiter(m,y+_.length,O),G=0===g.length?this.__autoDiscoverRecordDelimiter(m,y+_.length):this.__isRecordDelimiter(O,m,y+_.length);if(null!==c&&this.__isEscape(m,y,b)&&this.__isQuote(m,y+c.length))y+=c.length-1;else{if(!O||Q||G||j||z){this.state.quoting=!1,this.state.wasQuoting=!0,y+=_.length-1;continue}if(!1===a){const S=this.__error(new X("CSV_INVALID_CLOSING_QUOTE",["Invalid Closing Quote:",`got "${String.fromCharCode(O)}"`,"at line "+this.info.lines,"instead of delimiter, record delimiter, trimable character","(if activated) or comment"],this.options,this.__infoField()));if(void 0!==S)return S}else this.state.quoting=!1,this.state.wasQuoting=!0,this.state.field.prepend(_),y+=_.length-1}}else{if(0===this.state.field.length){this.state.quoting=!0,y+=_.length-1;continue}if(!1===a){const R=this.__infoField(),n=Object.keys(K).map(t=>!!K[t].equals(this.state.field.toString())&&t).filter(Boolean)[0],A=this.__error(new X("INVALID_OPENING_QUOTE",["Invalid Opening Quote:",`a quote is found on field ${JSON.stringify(R.column)} at line ${R.lines}, value is `+JSON.stringify(this.state.field.toString(o)),n?`(${n} bom)`:void 0],this.options,R,{field:this.state.field}));if(void 0!==A)return A}}if(!1===this.state.quoting){const N=this.__isRecordDelimiter(b,m,y);if(0!==N){const H=this.state.commenting&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length;if(H)this.info.comment_lines++;else{if(!1===this.state.enabled&&this.info.lines+(!0===this.state.wasRowDelimiter?1:0)>=M){this.state.enabled=!0,this.__resetField(),this.__resetRecord(),y+=N-1;continue}if(!0===J&&!1===this.state.wasQuoting&&0===this.state.record.length&&0===this.state.field.length){this.info.empty_lines++,y+=N-1;continue}this.info.bytes=this.state.bufBytesStart+y;const C=this.__onField();if(void 0!==C)return C;this.info.bytes=this.state.bufBytesStart+y+N;const D=this.__onRecord(i);if(void 0!==D)return D;if(-1!==l&&this.info.records>=l)return this.state.stop=!0,void r()}this.state.commenting=!1,y+=N-1;continue}if(this.state.commenting)continue;const $=null===h?0:this.__compareBytes(h,m,y,b);if(0!==$&&(!1===U||0===this.state.field.length)){this.state.commenting=!0;continue}const T=this.__isDelimiter(m,y,b);if(0!==T){this.info.bytes=this.state.bufBytesStart+y;const x=this.__onField();if(void 0!==x)return x;y+=T-1;continue}}}if(!1===this.state.commenting&&0!==s&&this.state.record_length+this.state.field.length>s)return this.__error(new X("CSV_MAX_RECORD_SIZE",["Max Record Size:","record exceed the maximum number of tolerated bytes","of "+s,"at line "+this.info.lines],this.options,this.__infoField()));const v=!1===V||!0===this.state.quoting||0!==this.state.field.length||!this.__isCharTrimable(m,y),I=!1===f||!1===this.state.wasQuoting;if(!0==v&&!0==I)this.state.field.append(b);else{if(!0===f&&!this.__isCharTrimable(m,y))return this.__error(new X("CSV_NON_TRIMABLE_CHAR_AFTER_CLOSING_QUOTE",["Invalid Closing Quote:","found non trimable byte after quote","at line "+this.info.lines],this.options,this.__infoField()));!1==v&&(y+=this.__isCharTrimable(m,y)-1)}}if(!0===e)if(!0===this.state.quoting){const L=this.__error(new X("CSV_QUOTE_NOT_CLOSED",["Quote Not Closed:","the parsing is finished with an opening quote at line "+this.info.lines],this.options,this.__infoField()));if(void 0!==L)return L}else if(!0===this.state.wasQuoting||0!==this.state.record.length||0!==this.state.field.length){this.info.bytes=this.state.bufBytesStart+y;const P=this.__onField();if(void 0!==P)return P;const B=this.__onRecord(i);if(void 0!==B)return B}else!0===this.state.wasRowDelimiter?this.info.empty_lines++:!0===this.state.commenting&&this.info.comment_lines++;else this.state.bufBytesStart+=y,this.state.previousBuf=m.slice(y);!0===this.state.wasRowDelimiter&&(this.info.lines++,this.state.wasRowDelimiter=!1)},__onRecord:function(t){const{columns:i,group_columns_by_name:r,encoding:e,info:n,from:o,relax_column_count:s,relax_column_count_less:a,relax_column_count_more:f,raw:l,skip_records_with_empty_values:u}=this.options,{enabled:h,record:c}=this.state;if(!1===h)return this.__resetRecord();const _=c.length;if(!0===i)return!0===u&&nt(c)?void this.__resetRecord():this.__firstLineToColumns(c);if(!1===i&&0===this.info.records&&(this.state.expectedRecordLength=_),_!==this.state.expectedRecordLength){const g=!1===i?new X("CSV_RECORD_INCONSISTENT_FIELDS_LENGTH",["Invalid Record Length:",`expect ${this.state.expectedRecordLength},`,`got ${_} on line `+this.info.lines],this.options,this.__infoField(),{record:c}):new X("CSV_RECORD_INCONSISTENT_COLUMNS",["Invalid Record Length:",`columns length is ${i.length},`,`got ${_} on line `+this.info.lines],this.options,this.__infoField(),{record:c});if(!0===s||!0===a&&_<this.state.expectedRecordLength||!0===f&&_>this.state.expectedRecordLength)this.info.invalid_field_length++,this.state.error=g;else{const d=this.__error(g);if(d)return d}}if(!0===u&&nt(c))this.__resetRecord();else if(!0===this.state.recordHasError)this.__resetRecord(),this.state.recordHasError=!1;else{if(this.info.records++,1===o||this.info.records>=o){const m=this.options.objname;if(!1!==i){const p={};for(let t=0,e=c.length;t<e;t++)void 0===i[t]||i[t].disabled||(!0===r&&void 0!==p[i[t].name]?Array.isArray(p[i[t].name])?p[i[t].name]=p[i[t].name].concat(c[t]):p[i[t].name]=[p[i[t].name],c[t]]:p[i[t].name]=c[t]);if(!0===l||!0===n){const y=Object.assign({record:p},!0===l?{raw:this.state.rawBuffer.toString(e)}:{},!0===n?{info:this.__infoRecord()}:{}),w=this.__push(void 0===m?y:[p[m],y],t);if(w)return w}else{const b=this.__push(void 0===m?p:[p[m],p],t);if(b)return b}}else if(!0===l||!0===n){const v=Object.assign({record:c},!0===l?{raw:this.state.rawBuffer.toString(e)}:{},!0===n?{info:this.__infoRecord()}:{}),I=this.__push(void 0===m?v:[c[m],v],t);if(I)return I}else{const E=this.__push(void 0===m?c:[c[m],c],t);if(E)return E}}this.__resetRecord()}},__firstLineToColumns:function(t){const e=this.state.firstLineToHeaders;try{const i=void 0===e?t:e.call(null,t);if(!Array.isArray(i))return this.__error(new X("CSV_INVALID_COLUMN_MAPPING",["Invalid Column Mapping:","expect an array from column function,","got "+JSON.stringify(i)],this.options,this.__infoField(),{headers:i}));const r=z(i);this.state.expectedRecordLength=r.length,this.options.columns=r,this.__resetRecord()}catch(t){return t}},__resetRecord:function(){!0===this.options.raw&&this.state.rawBuffer.reset(),this.state.error=void 0,this.state.record=[],this.state.record_length=0},__onField:function(){const{cast:t,encoding:e,rtrim:i,max_record_size:r}=this.options,{enabled:n,wasQuoting:o}=this.state;if(!1===n)return this.__resetField();let s=this.state.field.toString(e);if(!0===i&&!1===o&&(s=s.trimRight()),!0===t){const[a,f]=this.__cast(s);if(void 0!==a)return a;s=f}this.state.record.push(s),0!==r&&"string"==typeof s&&(this.state.record_length+=s.length),this.__resetField()},__resetField:function(){this.state.field.reset(),this.state.wasQuoting=!1},__push:function(t,e){const i=this.options.on_record;if(void 0!==i){const r=this.__infoRecord();try{t=i.call(null,t,r)}catch(t){return t}if(null==t)return}e(t)},__cast:function(t){const{columns:e,relax_column_count:i}=this.options,r=Array.isArray(e);if(!0===r&&i&&this.options.columns.length<=this.state.record.length)return[void 0,void 0];if(null!==this.state.castField)try{const n=this.__infoField();return[void 0,this.state.castField.call(null,t,n)]}catch(t){return[t]}if(this.__isFloat(t))return[void 0,parseFloat(t)];if(!1===this.options.cast_date)return[void 0,t];{const o=this.__infoField();return[void 0,this.options.cast_date.call(null,t,o)]}},__isCharTrimable:function(t,e){return((e,i)=>{const r=this.state.timchars;t:for(let t=0;t<r.length;t++){const n=r[t];for(let t=0;t<n.length;t++)if(n[t]!==e[i+t])continue t;return n.length}return 0})(t,e)},__isFloat:function(t){return 0<=t-parseFloat(t)+1},__compareBytes:function(e,i,r,t){if(e[0]!==t)return 0;const n=e.length;for(let t=1;t<n;t++)if(e[t]!==i[r+t])return 0;return n},__isDelimiter:function(e,i,r){const{delimiter:n,ignore_last_delimiters:t}=this.options;if(!(!0===t&&this.state.record.length===this.options.columns.length-1||!1!==t&&"number"==typeof t&&this.state.record.length===t-1))t:for(let t=0;t<n.length;t++){const o=n[t];if(o[0]===r){for(let t=1;t<o.length;t++)if(o[t]!==e[i+t])continue t;return o.length}}return 0},__isRecordDelimiter:function(e,i,r){const n=this.options.record_delimiter,o=n.length;t:for(let t=0;t<o;t++){const s=n[t],a=s.length;if(s[0]===e){for(let t=1;t<a;t++)if(s[t]!==i[r+t])continue t;return s.length}}return 0},__isEscape:function(e,i,t){const r=this.options.escape;if(null===r)return!1;const n=r.length;if(r[0]!==t)return!1;for(let t=0;t<n;t++)if(r[t]!==e[i+t])return!1;return!0},__isQuote:function(e,i){const r=this.options.quote;if(null===r)return!1;const n=r.length;for(let t=0;t<n;t++)if(r[t]!==e[i+t])return!1;return!0},__autoDiscoverRecordDelimiter:function(i,r){const t=this.options.encoding,n=[Z.from("\r\n",t),Z.from("\n",t),Z.from("\r",t)];t:for(let e=0;e<n.length;e++){const o=n[e].length;for(let t=0;t<o;t++)if(n[e][t]!==i[r+t])continue t;return this.options.record_delimiter.push(n[e]),this.state.recordDelimiterMaxLength=n[e].length,n[e].length}return 0},__error:function(t){const{encoding:e,raw:i,skip_records_with_error:r}=this.options,n="string"==typeof t?new Error(t):t;if(!r)return n;this.state.recordHasError=!0,void 0!==this.options.on_skip&&this.options.on_skip(n,i?this.state.rawBuffer.toString(e):void 0)},__infoDataSet:function(){return{...this.info,columns:this.options.columns}},__infoRecord:function(){const{columns:t,raw:e,encoding:i}=this.options;return{...this.__infoDataSet(),error:this.state.error,header:!0===t,index:this.state.record.length,raw:e?this.state.rawBuffer.toString(i):void 0}},__infoField:function(){const t=this.options.columns,e=Array.isArray(t);return{...this.__infoRecord(),column:!0===e?t.length>this.state.record.length?t[this.state.record.length].name:null:this.state.record.length,quoting:this.state.wasQuoting}}}}const G=12,$=13,H=10,W=32,tt=9,et=function(t){return{bomSkipped:!1,bufBytesStart:0,castField:t.cast_function,commenting:!1,error:void 0,enabled:1===t.from_line,escaping:!1,escapeIsQuote:x(t.escape)&&x(t.quote)&&0===Z.compare(t.escape,t.quote),expectedRecordLength:Array.isArray(t.columns)?t.columns.length:void 0,field:new j(20),firstLineToHeaders:t.cast_first_line_to_header,needMoreDataSize:Math.max(null!==t.comment?t.comment.length:0,...t.delimiter.map(t=>t.length),null!==t.quote?t.quote.length:0),previousBuf:void 0,quoting:!1,stop:!1,rawBuffer:new j(100),record:[],recordHasError:!1,record_length:0,recordDelimiterMaxLength:0===t.record_delimiter.length?0:Math.max(...t.record_delimiter.map(t=>t.length)),trimChars:[Z.from(" ",t.encoding)[0],Z.from("\t",t.encoding)[0]],wasQuoting:!1,wasRowDelimiter:!1,timchars:[Z.from(Z.from([$],"utf8").toString(),t.encoding),Z.from(Z.from([H],"utf8").toString(),t.encoding),Z.from(Z.from([G],"utf8").toString(),t.encoding),Z.from(Z.from([W],"utf8").toString(),t.encoding),Z.from(Z.from([tt],"utf8").toString(),t.encoding)]}},it=function(t){return t.replace(/([A-Z])/g,function(t,e){return"_"+e.toLowerCase()})},rt=function(t){const i={};for(const r in t)i[it(r)]=t[r];if(void 0===i.encoding||!0===i.encoding)i.encoding="utf8";else if(null===i.encoding||!1===i.encoding)i.encoding=null;else if("string"!=typeof i.encoding&&null!==i.encoding)throw new X("CSV_INVALID_OPTION_ENCODING",["Invalid option encoding:","encoding must be a string or null to return a buffer,","got "+JSON.stringify(i.encoding)],i);if(null==i.bom||!1===i.bom)i.bom=!1;else if(!0!==i.bom)throw new X("CSV_INVALID_OPTION_BOM",["Invalid option bom:","bom must be true,","got "+JSON.stringify(i.bom)],i);if((i.cast_function=null)==i.cast||!1===i.cast||""===i.cast)i.cast=void 0;else if("function"==typeof i.cast)i.cast_function=i.cast,i.cast=!0;else if(!0!==i.cast)throw new X("CSV_INVALID_OPTION_CAST",["Invalid option cast:","cast must be true or a function,","got "+JSON.stringify(i.cast)],i);if(null==i.cast_date||!1===i.cast_date||""===i.cast_date)i.cast_date=!1;else if(!0===i.cast_date)i.cast_date=function(t){const e=Date.parse(t);return isNaN(e)?t:new Date(e)};else if("function"!=typeof i.cast_date)throw new X("CSV_INVALID_OPTION_CAST_DATE",["Invalid option cast_date:","cast_date must be true or a function,","got "+JSON.stringify(i.cast_date)],i);if(!(i.cast_first_line_to_header=null)===i.columns)i.cast_first_line_to_header=void 0;else if("function"==typeof i.columns)i.cast_first_line_to_header=i.columns,i.columns=!0;else if(Array.isArray(i.columns))i.columns=z(i.columns);else{if(null!=i.columns&&!1!==i.columns)throw new X("CSV_INVALID_OPTION_COLUMNS",["Invalid option columns:","expect an array, a function or true,","got "+JSON.stringify(i.columns)],i);i.columns=!1}if(null==i.group_columns_by_name||!1===i.group_columns_by_name)i.group_columns_by_name=!1;else{if(!0!==i.group_columns_by_name)throw new X("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","expect an boolean,","got "+JSON.stringify(i.group_columns_by_name)],i);if(!1===i.columns)throw new X("CSV_INVALID_OPTION_GROUP_COLUMNS_BY_NAME",["Invalid option group_columns_by_name:","the `columns` mode must be activated."],i)}if(null==i.comment||!1===i.comment||""===i.comment)i.comment=null;else if("string"==typeof i.comment&&(i.comment=Z.from(i.comment,i.encoding)),!x(i.comment))throw new X("CSV_INVALID_OPTION_COMMENT",["Invalid option comment:","comment must be a buffer or a string,","got "+JSON.stringify(i.comment)],i);if(null==i.comment_no_infix||!1===i.comment_no_infix)i.comment_no_infix=!1;else if(!0!==i.comment_no_infix)throw new X("CSV_INVALID_OPTION_COMMENT",["Invalid option comment_no_infix:","value must be a boolean,","got "+JSON.stringify(i.comment_no_infix)],i);const e=JSON.stringify(i.delimiter);if(Array.isArray(i.delimiter)||(i.delimiter=[i.delimiter]),0===i.delimiter.length)throw new X("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got "+e],i);if(i.delimiter=i.delimiter.map(function(t){if(null==t||!1===t)return Z.from(",",i.encoding);if(x(t="string"==typeof t?Z.from(t,i.encoding):t)&&0!==t.length)return t;throw new X("CSV_INVALID_OPTION_DELIMITER",["Invalid option delimiter:","delimiter must be a non empty string or buffer or array of string|buffer,","got "+e],i)}),void 0===i.escape||!0===i.escape?i.escape=Z.from('"',i.encoding):"string"==typeof i.escape?i.escape=Z.from(i.escape,i.encoding):null!==i.escape&&!1!==i.escape||(i.escape=null),null!==i.escape&&!x(i.escape))throw new Error("Invalid Option: escape must be a buffer, a string or a boolean, got "+JSON.stringify(i.escape));if(null==i.from)i.from=1;else{if("string"==typeof i.from&&/\d+/.test(i.from)&&(i.from=parseInt(i.from)),!Number.isInteger(i.from))throw new Error("Invalid Option: from must be an integer, got "+JSON.stringify(i.from));if(i.from<0)throw new Error("Invalid Option: from must be a positive integer, got "+JSON.stringify(t.from))}if(null==i.from_line)i.from_line=1;else{if("string"==typeof i.from_line&&/\d+/.test(i.from_line)&&(i.from_line=parseInt(i.from_line)),!Number.isInteger(i.from_line))throw new Error("Invalid Option: from_line must be an integer, got "+JSON.stringify(t.from_line));if(i.from_line<=0)throw new Error("Invalid Option: from_line must be a positive integer greater than 0, got "+JSON.stringify(t.from_line))}if(null==i.ignore_last_delimiters)i.ignore_last_delimiters=!1;else if("number"==typeof i.ignore_last_delimiters)i.ignore_last_delimiters=Math.floor(i.ignore_last_delimiters),0===i.ignore_last_delimiters&&(i.ignore_last_delimiters=!1);else if("boolean"!=typeof i.ignore_last_delimiters)throw new X("CSV_INVALID_OPTION_IGNORE_LAST_DELIMITERS",["Invalid option `ignore_last_delimiters`:","the value must be a boolean value or an integer,","got "+JSON.stringify(i.ignore_last_delimiters)],i);if(!0===i.ignore_last_delimiters&&!1===i.columns)throw new X("CSV_IGNORE_LAST_DELIMITERS_REQUIRES_COLUMNS",["The option `ignore_last_delimiters`","requires the activation of the `columns` option"],i);if(null==i.info||!1===i.info)i.info=!1;else if(!0!==i.info)throw new Error("Invalid Option: info must be true, got "+JSON.stringify(i.info));if(null==i.max_record_size||!1===i.max_record_size)i.max_record_size=0;else if(!(Number.isInteger(i.max_record_size)&&0<=i.max_record_size)){if("string"!=typeof i.max_record_size||!/\d+/.test(i.max_record_size))throw new Error("Invalid Option: max_record_size must be a positive integer, got "+JSON.stringify(i.max_record_size));i.max_record_size=parseInt(i.max_record_size)}if(null==i.objname||!1===i.objname)i.objname=void 0;else if(x(i.objname)){if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty buffer");null!==i.encoding&&(i.objname=i.objname.toString(i.encoding))}else if("string"==typeof i.objname){if(0===i.objname.length)throw new Error("Invalid Option: objname must be a non empty string")}else if("number"!=typeof i.objname)throw new Error("Invalid Option: objname must be a string or a buffer, got "+i.objname);if(void 0!==i.objname)if("number"==typeof i.objname){if(!1!==i.columns)throw Error("Invalid Option: objname index cannot be combined with columns or be defined as a field")}else if(!1===i.columns)throw Error("Invalid Option: objname field must be combined with columns or be defined as an index");if(null==i.on_record)i.on_record=void 0;else if("function"!=typeof i.on_record)throw new X("CSV_INVALID_OPTION_ON_RECORD",["Invalid option `on_record`:","expect a function,","got "+JSON.stringify(i.on_record)],i);if(null===i.quote||!1===i.quote||""===i.quote)i.quote=null;else if(void 0===i.quote||!0===i.quote?i.quote=Z.from('"',i.encoding):"string"==typeof i.quote&&(i.quote=Z.from(i.quote,i.encoding)),!x(i.quote))throw new Error("Invalid Option: quote must be a buffer or a string, got "+JSON.stringify(i.quote));if(null==i.raw||!1===i.raw)i.raw=!1;else if(!0!==i.raw)throw new Error("Invalid Option: raw must be true, got "+JSON.stringify(i.raw));if(void 0===i.record_delimiter)i.record_delimiter=[];else if("string"==typeof i.record_delimiter||x(i.record_delimiter)){if(0===i.record_delimiter.length)throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer,","got "+JSON.stringify(i.record_delimiter)],i);i.record_delimiter=[i.record_delimiter]}else if(!Array.isArray(i.record_delimiter))throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer,","got "+JSON.stringify(i.record_delimiter)],i);if(i.record_delimiter=i.record_delimiter.map(function(t,e){if("string"!=typeof t&&!x(t))throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a string, a buffer or array of string|buffer",`at index ${e},`,"got "+JSON.stringify(t)],i);if(0===t.length)throw new X("CSV_INVALID_OPTION_RECORD_DELIMITER",["Invalid option `record_delimiter`:","value must be a non empty string or buffer",`at index ${e},`,"got "+JSON.stringify(t)],i);return t="string"==typeof t?Z.from(t,i.encoding):t}),"boolean"!=typeof i.relax_column_count){if(null!=i.relax_column_count)throw new Error("Invalid Option: relax_column_count must be a boolean, got "+JSON.stringify(i.relax_column_count));i.relax_column_count=!1}if("boolean"!=typeof i.relax_column_count_less){if(null!=i.relax_column_count_less)throw new Error("Invalid Option: relax_column_count_less must be a boolean, got "+JSON.stringify(i.relax_column_count_less));i.relax_column_count_less=!1}if("boolean"!=typeof i.relax_column_count_more){if(null!=i.relax_column_count_more)throw new Error("Invalid Option: relax_column_count_more must be a boolean, got "+JSON.stringify(i.relax_column_count_more));i.relax_column_count_more=!1}if("boolean"!=typeof i.relax_quotes){if(null!=i.relax_quotes)throw new Error("Invalid Option: relax_quotes must be a boolean, got "+JSON.stringify(i.relax_quotes));i.relax_quotes=!1}if("boolean"!=typeof i.skip_empty_lines){if(null!=i.skip_empty_lines)throw new Error("Invalid Option: skip_empty_lines must be a boolean, got "+JSON.stringify(i.skip_empty_lines));i.skip_empty_lines=!1}if("boolean"!=typeof i.skip_records_with_empty_values){if(null!=i.skip_records_with_empty_values)throw new Error("Invalid Option: skip_records_with_empty_values must be a boolean, got "+JSON.stringify(i.skip_records_with_empty_values));i.skip_records_with_empty_values=!1}if("boolean"!=typeof i.skip_records_with_error){if(null!=i.skip_records_with_error)throw new Error("Invalid Option: skip_records_with_error must be a boolean, got "+JSON.stringify(i.skip_records_with_error));i.skip_records_with_error=!1}if(null==i.rtrim||!1===i.rtrim)i.rtrim=!1;else if(!0!==i.rtrim)throw new Error("Invalid Option: rtrim must be a boolean, got "+JSON.stringify(i.rtrim));if(null==i.ltrim||!1===i.ltrim)i.ltrim=!1;else if(!0!==i.ltrim)throw new Error("Invalid Option: ltrim must be a boolean, got "+JSON.stringify(i.ltrim));if(null==i.trim||!1===i.trim)i.trim=!1;else if(!0!==i.trim)throw new Error("Invalid Option: trim must be a boolean, got "+JSON.stringify(i.trim));if(!0===i.trim&&!1!==t.ltrim?i.ltrim=!0:!0!==i.ltrim&&(i.ltrim=!1),!0===i.trim&&!1!==t.rtrim?i.rtrim=!0:!0!==i.rtrim&&(i.rtrim=!1),null==i.to)i.to=-1;else{if("string"==typeof i.to&&/\d+/.test(i.to)&&(i.to=parseInt(i.to)),!Number.isInteger(i.to))throw new Error("Invalid Option: to must be an integer, got "+JSON.stringify(t.to));if(i.to<=0)throw new Error("Invalid Option: to must be a positive integer greater than 0, got "+JSON.stringify(t.to))}if(null==i.to_line)i.to_line=-1;else{if("string"==typeof i.to_line&&/\d+/.test(i.to_line)&&(i.to_line=parseInt(i.to_line)),!Number.isInteger(i.to_line))throw new Error("Invalid Option: to_line must be an integer, got "+JSON.stringify(t.to_line));if(i.to_line<=0)throw new Error("Invalid Option: to_line must be a positive integer greater than 0, got "+JSON.stringify(t.to_line))}return i},nt=function(t){return t.every(t=>null==t||t.toString&&""===t.toString().trim())},ot=13,st=10,K={"utf8":Z.from([239,187,191]),"utf16le":Z.from([255,254])};return t.CsvError=X,t.parse=function(t,e={}){"string"==typeof t&&(t=Z.from(t));const i=e&&e.objname?{}:[],r=Q(e),n=t=>{void 0===r.options.objname?i.push(t):i[t[0]]=t[1]},o=()=>{},s=r.parse(t,!1,n,o);if(void 0!==s)throw s;const a=r.parse(void 0,!0,n,o);if(void 0!==a)throw a;return i},t}({});